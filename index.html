<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Target Coordinate Calculator | T√≠nh to√°n t·ªça ƒë·ªô m·ª•c ti√™u</title>

    <!-- Leaflet CSS - Th∆∞ vi·ªán b·∫£n ƒë·ªì t∆∞∆°ng t√°c -->
    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css" />
</head>

<body>
    <!-- Main Application Container -->
    <div class="app-container">
    
        <!-- Header Section -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">
                    H·ªá th·ªëng t√≠nh to√°n t·ªça ƒë·ªô m·ª•c ti√™u
                </h1>
                <p class="app-subtitle">
                    T√≠nh to√°n trong kh√¥ng gian 2D (ph·∫≥ng)
                </p>
            </div>
        </header>

        <!-- Main Content: Sidebar + Map -->
        <div class="main-content">
        
            <!-- Sidebar - Input Panel -->
            <aside class="sidebar">
                
                <!-- Mode Toggle Button -->
                <div class="mode-toggle-section">
                    <label class="mode-label">ƒê·ªãnh d·∫°ng t·ªça ƒë·ªô:</label>
                    <button id="toggleModeBtn" class="btn-toggle" title="Chuy·ªÉn ƒë·ªïi gi·ªØa Decimal v√† DMS">
                        <span id="modeText">Decimal</span>
                        <span class="toggle-icon">‚áÑ</span>
                    </button>
                </div>

                <!-- Observer Coordinates Section -->
                <section class="input-section">
                <h2 class="section-title">
                    <span class="icon-marker red">üìç</span>
                    T·ªça ƒë·ªô Quan s√°t vi√™n
                </h2>

                <!-- Decimal Degrees Input (Default) -->
                <div id="decimalInputs" class="input-group">
                    <div class="field">
                        <label for="latDecimal">Vƒ© ƒë·ªô (¬∞)</label>
                        <input 
                            type="number" 
                            id="latDecimal" 
                            step="0.000001" 
                            value="10.762622"
                            placeholder="10.762622"
                            min="-90"
                            max="90"
                        />
                        <small class="field-hint">Ph·∫°m vi: -90¬∞ ƒë·∫øn 90¬∞</small>
                    </div>

                    <div class="field">
                        <label for="lonDecimal">Kinh ƒë·ªô (¬∞)</label>
                        <input 
                            type="number" 
                            id="lonDecimal" 
                            step="0.000001" 
                            value="106.660172"
                            placeholder="106.660172"
                            min="-180"
                            max="180"
                        />
                        <small class="field-hint">Ph·∫°m vi: -180¬∞ ƒë·∫øn 180¬∞</small>
                    </div>
                </div>

                <!-- DMS Input (Hidden by default) -->
                <div id="dmsInputs" class="input-group" style="display: none;">
                    <!-- Latitude DMS -->
                    <div class="field">
                        <label>Vƒ© ƒë·ªô (D¬∞ M' S")</label>
                        <div class="dms-row">
                            <input type="number" id="latDeg" placeholder="¬∞" value="10" min="-90" max="90" />
                            <input type="number" id="latMin" placeholder="'" value="45" min="0" max="59" />
                            <input type="number" id="latSec" placeholder='"' value="45.44" min="0" max="59.99" step="0.01" />
                        </div>
                    </div>

                    <!-- Longitude DMS -->
                    <div class="field">
                        <label>Kinh ƒë·ªô (D¬∞ M' S")</label>
                        <div class="dms-row">
                            <input type="number" id="lonDeg" placeholder="¬∞" value="106" min="-180" max="180" />
                            <input type="number" id="lonMin" placeholder="'" value="39" min="0" max="59" />
                            <input type="number" id="lonSec" placeholder='"' value="36.62" min="0" max="59.99" step="0.01" />
                        </div>
                    </div>
                </div>
                </section>

                <!-- Measurement Data Section -->
                <section class="input-section">
                    <h2 class="section-title">
                        <span class="icon-marker green">üß≠</span>
                        D·ªØ li·ªáu ƒëo ƒë·∫°c
                    </h2>

                    <div class="field">
                        <label for="azimuth">
                            G√≥c ng·∫Øm (¬∞)
                            <span class="label-hint">(0¬∞ = B·∫Øc)</span>
                        </label>
                        <input 
                        type="number" 
                        id="azimuth" 
                        step="0.1" 
                        value="45"
                        placeholder="45"
                        min="0"
                        max="360"
                        />
                        <small class="field-hint">0¬∞ = B·∫Øc, 90¬∞ = ƒê√¥ng, 180¬∞ = Nam, 270¬∞ = T√¢y</small>
                    </div>

                    <div class="field">
                        <label for="distance">Kho·∫£ng c√°ch (km)</label>
                        <input 
                        type="number" 
                        id="distance" 
                        step="0.01" 
                        value="2.5"
                        placeholder="2.5"
                        min="0.001"
                        />
                        <small class="field-hint">ƒê·ªô ch√≠nh x√°c t·ªët nh·∫•t: &lt; 10 km</small>
                    </div>
                </section>

                <!-- Calculate Button -->
                <button id="calculateBtn" class="btn-calculate">
                    <span class="btn-icon">üìê</span>
                    T√çNH TO√ÅN T·ªåA ƒê·ªò
                </button>

                <!-- Error Display -->
                <div id="errorMessage" class="error-message" style="display: none;">
                    <span class="error-icon">‚ö†Ô∏è</span>
                    <span id="errorText"></span>
                </div>

                <!-- Result Display -->
                <div id="resultSection" class="result-section" style="display: none;">
                    <h3 class="result-title">
                        <span class="icon-marker blue">üéØ</span>
                        T·ªça ƒë·ªô M·ª•c ti√™u
                    </h3>
                    
                    <div class="result-grid">
                        <div class="result-item">
                            <span class="result-label">Vƒ© ƒë·ªô:</span>
                            <span id="resultLat" class="result-value">‚Äì</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Kinh ƒë·ªô:</span>
                            <span id="resultLon" class="result-value">‚Äì</span>
                        </div>
                    </div>

                    <div class="result-divider"></div>

                    <div class="result-grid">
                        <div class="result-item">
                            <span class="result-label">Kho·∫£ng c√°ch:</span>
                            <span id="resultDistance" class="result-value">‚Äì</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Ph∆∞∆°ng v·ªã:</span>
                            <span id="resultAzimuth" class="result-value">‚Äì</span>
                        </div>
                    </div>

                    <!-- Copy Button -->
                    <button id="copyBtn" class="btn-copy" title="Copy t·ªça ƒë·ªô">
                        <span class="copy-icon">üìã</span>
                        Copy t·ªça ƒë·ªô
                    </button>
                </div>

                <!-- Info Box -->
                <div class="info-box">
                    <div class="info-title">! L∆∞u √Ω quan tr·ªçng</div>
                    <ul class="info-list">
                        <li>Azimuth: 0¬∞ = B·∫Øc, 90¬∞ = ƒê√¥ng, 180¬∞ = Nam, 270¬∞ = T√¢y</li>
                        <li>ƒê·ªô ch√≠nh x√°c t·ªët nh·∫•t cho kho·∫£ng c√°ch &lt; 10km</li>
                        <li>T√≠nh to√°n d·ª±a tr√™n m√¥ h√¨nh c·∫ßu (spherical)</li>
                        <li>S·ª≠ d·ª•ng c√¥ng th·ª©c Haversine cho geodesic calculations</li>
                    </ul>
                </div>

            </aside>

            <!-- Map Container -->
            <main class="map-container">
                <!-- Leaflet Map will be rendered here -->
                <div id="map"></div>

                <!-- Map Legend -->
                <div class="map-legend">
                    <div class="legend-title">Ch√∫ gi·∫£i</div>
                    <div class="legend-items">
                        <div class="legend-item">
                            <span class="legend-dot red"></span>
                            <span>Quan s√°t vi√™n</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot blue"></span>
                            <span>M·ª•c ti√™u</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-line"></span>
                            <span>ƒê∆∞·ªùng ng·∫Øm</span>
                        </div>
                    </div>
                </div>

                <!-- Zoom Controls Info (Optional) -->
                <div class="map-controls-info">
                    <small>üí° Tip: Scroll ƒë·ªÉ zoom, k√©o ƒë·ªÉ di chuy·ªÉn b·∫£n ƒë·ªì</small>
                </div>
            </main>
        </div>
    </div>

    <!-- Leaflet JS - Th∆∞ vi·ªán b·∫£n ƒë·ªì -->
    <script
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin="">
    </script>

    <!-- Custom JavaScript Modules -->
    <script src="js/coordinateCalculator.js"></script>
    <script src="js/mapViewer.js"></script>

    <!-- Main Application Script -->
    <script>
        /**
         * Main Application Initialization
         * Kh·ªüi t·∫°o ·ª©ng d·ª•ng khi DOM ƒë√£ load xong
         */
        document.addEventListener('DOMContentLoaded', function() {
        console.log('GPS Target Calculating System - Initialized');

        // Kh·ªüi t·∫°o map v·ªõi t·ªça ƒë·ªô m·∫∑c ƒë·ªãnh (TP.HCM)
        const defaultLat = 10.762622;
        const defaultLon = 106.660172;
        
        initializeMap('map', defaultLat, defaultLon);
        
        // Log th√¥ng tin phi√™n b·∫£n
        console.log('Version: 1.0.0 (Phase 1)');
        console.log('Map: Leaflet.js v1.9.4');
        console.log('Coordinate System: WGS-84');
        });
    </script>
</body>
</html>